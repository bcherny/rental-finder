var earthRadiusKm = 6371.0;
var earthRadiusM  = earthRadiusM * 1000.0;
var earthRadiusMi = 3959.0;

function degToRad(deg) {
    return (deg * Math.PI / 180.0);
}

exports.haversineDistance = function (latitude1, longitude1, latitude2, longitude2) {
    var lat1 = degToRad(latitude1);
    var lng1 = degToRad(longitude1);
    var lat2 = degToRad(latitude2);
    var lng2 = degToRad(longitude2);

    var deltaLat = Math.abs(lat1 - lat2);
    var deltaLng = Math.abs(lng1 - lng2);

    var a = Math.pow(Math.sin(deltaLat / 2.0), 2.0);
    var b = Math.cos(lat1) * Math.cos(lat2);
    var c = Math.pow(Math.sin(deltaLng / 2.0), 2.0);

    var d = a + b * c;

    var deltaSigma = 2.0 * Math.asin(Math.sqrt(d));

    return (earthRadiusKm * deltaSigma);
}

exports.vincentyDistance = function(latitude1, longitude1, latitude2, longitude2) {
    var lat1 = degToRad(latitude1);
    var lng1 = degToRad(longitude1);
    var lat2 = degToRad(latitude2);
    var lng2 = degToRad(longitude2);

    var deltaLng = Math.abs(lng1 - lng2);

    // Numerator
    var a = Math.pow(Math.cos(lat2) * Math.sin(deltaLng), 2.0);

    var b = Math.cos(lat1) * Math.sin(lat2);
    var c = Math.sin(lat1) * Math.cos(lat2) * Math.cos(deltaLng);
    var d = Math.pow(b - c, 2.0);

    var e = Math.sqrt(a + d);

    // Denominator
    var f = Math.sin(lat1) * Math.sin(lat2);
    var g = Math.cos(lat1) * Math.cos(lat2) * Math.cos(deltaLng);

    var h = f + g;

    var deltaSigma = Math.atan2(e, h);

    return (earthRadiusKm * deltaSigma);
}

